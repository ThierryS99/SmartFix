<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

@model OrdemManutencaoModel
@{
    ViewData["Title"] = "Cadastro de máquinas";
}

<br />

<div class="text-center">
    <h1 class="display-6">CADASTRO DE ORDEM DE MANUTENÇÃO</h1>
    <p></p>
</div>

<br />

<form asp-controller="CadastroOrdemManutencao" asp-action="CadastroOrdemManutencaoView" method="post">

    <div class="form-group">

        <label for="Nome">Motivo:</label>
        <input type="text" required="true" style="text-transform:uppercase" asp-for="Motivo" class="form-control" placeholder="Informe o motivo da manutenção.">

        <br />

        <label for="Nome">Descrição da Manutenção:</label>
        <input type="text" required="true" style="text-transform:uppercase" asp-for="Observacao" class="form-control" placeholder="Informe mais detalhes sobre a manutenção realizada.">

        <br />

        <label for="Nome">Id do Setor:</label>
        <input type="text" required="true" style="text-transform:uppercase" asp-for="SetorId" class="form-control" placeholder="Informe o Id do setor afetado.">

        <br />

        <label for="Nome">Id da Máquina:</label>
        <input type="text" required="true" style="text-transform:uppercase" asp-for="MaquinaId" class="form-control" placeholder="Informe o Id da máquina.">

        @if (Model != null)
        {
            MaquinaModel maquinaModel = new MaquinaModel();

            maquinaModel.MaquinasCadastradas();

            foreach (MaquinaModel produto in Model)
            {
                <tr>
                    <select class="form-select form-select-lg mb-3" asp-for="MaquinaId" aria-label="IdMaquina">
                        <option selected>Selecione a máquina.</option>
                        <option value="@produto.Id" name="IdMaquina">@produto.CodigoIdentificacao</option>
                    </select>
                    <th scope="row">@produto.Id</th>
                </tr>
            }
        }


        <br />

        <label for="Nome">Horas de Funcionamento:</label>
        <input type="text" required="true" style="text-transform:uppercase" asp-for="HorasFuncionamento" class="form-control" placeholder="Informe as horas de funcionamento prevista.">

        <br />

        <label for="Nome">Tempo Necessário:</label>
        <input type="text" required="true" style="text-transform:uppercase" asp-for="TempoExecucao" class="form-control" placeholder="Informe o tempo previsto para realizar.">

        <br />

        <select class="form-select form-select-lg mb-3" asp-for="TipoNumero" aria-label="TIPO">
            <option selected>Selecione o tipo de manutenção.</option>
            <option value="0" value="3" name="tipo">Preventiva</option>
            <option value="1" value="3" name="tipo">Corretiva (Agendada)</option>
            <option value="2" value="3" name="tipo">Corretiva (Inesperada)</option>
        </select>

        <br />

        <select class="form-select form-select-lg mb-3" asp-for="StatusNumero" aria-label="STATUS">
            <option selected>Selecione o status atual da operação.</option>
            <option value="0" name="status">Aberta (Aguardando)</option>
            <option value="1" name="status">Aberta (Executando)</option>
            <option value="2" name="status">Aberta (Parada)</option>
            <option value="3" name="status">Fechada</option>
        </select>

        <br />

        <label for="datetime">Data e Hora:</label>
        <input type="datetime-local" required="true" asp-for="DataHoraExecucao">

        <br />
        <br />

        <button type="submit" data-toggle="modal" data-target="#myModal" class="btn btn-primary">PROCESSAR</button>

        <div class="btn-group" role="group">
            <a role="button" class="btn btn-secondary" asp-controller="Home" asp-action="Index">CANCELAR</a>
        </div>

        <div class="modal fade" id="myModal">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">

                    <!-- Cabeçalho do Popup -->
                    <div class="modal-header">
                        <h4 class="modal-title">Cadastro de Ordem de Manutenção</h4>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>

                    <!-- Corpo do Popup -->
                    <div class="modal-body">
                        <p>Ordem cadastrada com sucesso!</p>
                    </div>

                    <!-- Rodapé do Popup -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                    </div>

                </div>
            </div>
        </div>

    </div>

</form>